{"version":3,"file":"commonHelpers.js","sources":["../src/data-api.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getPageData(criteria, page) {\n  const options = {\n    key: \"40976601-7e2fe02ca8efc6be3b00881e0\",\n    q: criteria,\n    image_type: \"photo\",\n    orientation: \"horizontal\",\n    safesearch: true,\n    page,\n    per_page: 40\n  }\n  return axios.get(\"https://pixabay.com/api/\", {params: options});\n}\n","// import SimpleLightbox from \"simplelightbox\";\n// import \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getPageData } from './data-api.js';\n\nconst form = document.querySelector('#search-form');\nconst searchBtn = document.querySelector('button[type=submit]');\nconst gallery = document.querySelector('.gallery')\nconst loadMoreBtn = document.querySelector('.load-more');\n\nloadMoreBtn.classList.add(\"is-hidden\");\n\nsearchBtn.addEventListener('click', searchHandler);\nloadMoreBtn.addEventListener('click', loadMoreHandler);\nlet page = 1;\n  \nasync function searchHandler(evt) {\n  evt.preventDefault();\n  page = 1;\n  gallery.innerHTML = \"\";\n  loadMoreBtn.classList.add(\"is-hidden\");\n  const searchItem = form.elements.searchQuery.value;\n  if (searchItem.length === 0) {\n    iziToast.info({\n      title: 'Please add some data to search',\n      position: 'topRight'\n    })\n    return;\n  }\n  try {\n    const resp = await getPageData(searchItem, page);\n    const data = resp.data;\n    if (data.hits.length === 0) {\n      iziToast.warning({\n        title: 'Sorry, there are no images matching your search query. Please try again.',\n        position: 'topRight'\n      })\n    } else {\n      iziToast.success({\n        title: `Hooray! We found ${data.totalHits} images.`,\n        position: 'topRight'\n      })\n      createMarkup(data.hits);\n      loadMoreBtn.classList.remove(\"is-hidden\");\n    }\n  } catch (err) {\n    iziToast.error({\n      title: 'Oops! Something went wrong! Try reload the page!',\n      message: err.message,\n      position: 'topRight'\n    })\n  }\n}\n\nfunction createMarkup(data) {\n  const markUp = data.map(item => {\n    return `\n    <div class=\"photo-card\">\n      <div class=\"image-wrapper\"><img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" /></div>\n      <div class=\"info\">\n          <p class=\"info-item\">\n            <b>Likes</b></br>\n            ${item.likes}\n          </p>\n          <p class=\"info-item\">\n            <b>Views</b></br>\n            ${item.views}\n          </p>\n          <p class=\"info-item\">\n            <b>Comments</b></br>\n            ${item.comments}\n          </p>\n          <p class=\"info-item\">\n            <b>Downloads</b></br>\n            ${item.downloads}\n          </p>\n      </div>\n    </div>\n`\n  }).join('');\n  gallery.insertAdjacentHTML(\"beforeend\", markUp);\n}\n\nasync function loadMoreHandler(evt) {\n  evt.preventDefault();\n  page += 1;\n  const searchItem = form.elements.searchQuery.value;\n  try {\n    const resp = await getPageData(searchItem, page);\n    createMarkup(resp.data.hits);\n    if ((page * 40) > resp.data.totalHits) {\n      loadMoreBtn.classList.add(\"is-hidden\");\n      iziToast.warning({\n        title: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight'\n      })\n    }\n  } catch (err) {\n    iziToast.error({\n      title: 'Oops! Something went wrong! Try reload the page!',\n      message: err.message,\n      position: 'topRight'\n    })\n  }\n}"],"names":["getPageData","criteria","page","options","axios","form","searchBtn","gallery","loadMoreBtn","searchHandler","loadMoreHandler","evt","searchItem","iziToast","data","createMarkup","err","markUp","item","resp"],"mappings":"6vBAEO,eAAeA,EAAYC,EAAUC,EAAM,CAChD,MAAMC,EAAU,CACd,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACX,EACD,OAAOE,EAAM,IAAI,2BAA4B,CAAC,OAAQD,CAAO,CAAC,CAChE,CCNA,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAY,SAAS,cAAc,qBAAqB,EACxDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,YAAY,EAEvDA,EAAY,UAAU,IAAI,WAAW,EAErCF,EAAU,iBAAiB,QAASG,CAAa,EACjDD,EAAY,iBAAiB,QAASE,CAAe,EACrD,IAAIR,EAAO,EAEX,eAAeO,EAAcE,EAAK,CAChCA,EAAI,eAAc,EAClBT,EAAO,EACPK,EAAQ,UAAY,GACpBC,EAAY,UAAU,IAAI,WAAW,EACrC,MAAMI,EAAaP,EAAK,SAAS,YAAY,MAC7C,GAAIO,EAAW,SAAW,EAAG,CAC3BC,EAAS,KAAK,CACZ,MAAO,iCACP,SAAU,UAChB,CAAK,EACD,MACD,CACD,GAAI,CAEF,MAAMC,GADO,MAAMd,EAAYY,EAAYV,CAAI,GAC7B,KACdY,EAAK,KAAK,SAAW,EACvBD,EAAS,QAAQ,CACf,MAAO,2EACP,SAAU,UAClB,CAAO,GAEDA,EAAS,QAAQ,CACf,MAAO,oBAAoBC,EAAK,oBAChC,SAAU,UAClB,CAAO,EACDC,EAAaD,EAAK,IAAI,EACtBN,EAAY,UAAU,OAAO,WAAW,EAE3C,OAAQQ,EAAP,CACAH,EAAS,MAAM,CACb,MAAO,mDACP,QAASG,EAAI,QACb,SAAU,UAChB,CAAK,CACF,CACH,CAEA,SAASD,EAAaD,EAAM,CAC1B,MAAMG,EAASH,EAAK,IAAII,GACf;AAAA;AAAA,6CAEkCA,EAAK,sBAAsBA,EAAK;AAAA;AAAA;AAAA;AAAA,cAI/DA,EAAK;AAAA;AAAA;AAAA;AAAA,cAILA,EAAK;AAAA;AAAA;AAAA;AAAA,cAILA,EAAK;AAAA;AAAA;AAAA;AAAA,cAILA,EAAK;AAAA;AAAA;AAAA;AAAA,CAKhB,EAAE,KAAK,EAAE,EACVX,EAAQ,mBAAmB,YAAaU,CAAM,CAChD,CAEA,eAAeP,EAAgBC,EAAK,CAClCA,EAAI,eAAc,EAClBT,GAAQ,EACR,MAAMU,EAAaP,EAAK,SAAS,YAAY,MAC7C,GAAI,CACF,MAAMc,EAAO,MAAMnB,EAAYY,EAAYV,CAAI,EAC/Ca,EAAaI,EAAK,KAAK,IAAI,EACtBjB,EAAO,GAAMiB,EAAK,KAAK,YAC1BX,EAAY,UAAU,IAAI,WAAW,EACrCK,EAAS,QAAQ,CACf,MAAO,6DACP,SAAU,UAClB,CAAO,EAEJ,OAAQG,EAAP,CACAH,EAAS,MAAM,CACb,MAAO,mDACP,QAASG,EAAI,QACb,SAAU,UAChB,CAAK,CACF,CACH"}